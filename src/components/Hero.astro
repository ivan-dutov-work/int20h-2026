---
import { Button } from "./ui/button";
import Image from "astro/components/Image.astro";
import hero from "@/assets/hero/hero.svg";
import hand from "@/assets/hero/hand.svg";

const endDateRaw =
  import.meta.env.PUBLIC_REGISTRATION_END_DATE ?? "2026-02-22T23:59:59+02:00";
const endDate = new Date(endDateRaw);
const isRegistrationClosed = new Date() > endDate;
const endDateFormatted = endDate.toLocaleString("uk-UA", {
  day: "numeric",
  month: "long",
  year: "numeric",
  hour: "2-digit",
  minute: "2-digit",
  timeZone: "Europe/Kyiv",
});
---

<div
  class="flex flex-col md:grid md:grid-cols-2 md:grid-rows-1 gap-8 md:gap-16 py-8 md:py-15 px-6 md:px-16 items-center"
>
  <div class="relative w-full max-w-2/3 md:max-w-full">
    <Image
      class="w-full max-w-md md:max-w-full"
      src={hero}
      alt="INT20H-2026 hero"
      loading="eager"
      fetchpriority="high"
    />
    <div
      class="blur-[95px] absolute top-0 left-1/3 right-0 bottom-1/4 bg-accent z-[-1] opacity-10 rounded-full"
    >
    </div>
  </div>

  <div class="flex flex-col gap-12">
    <div class="flex flex-col gap-6">
      <h2 class="font-black text-lg leading-1.2 tracking-[-0.72px] max-w-xl">
        Ставай частинкою найбільшого студентського IT-хакатону в Україні!
      </h2>
      <div>
        <p class="mt-4">14-15 березня 2026, Київ</p>
        <p class="text-accent font-bold">Гібридний формат</p>
      </div>
    </div>

    {
      isRegistrationClosed ? (
        <div class="border border-accent/40 bg-accent/5 rounded-sm px-6 py-4 flex flex-col gap-2 w-fit">
          <p class="font-pixelated font-bold text-lg">❌ Реєстрація закрита</p>
          <p class="text-sm opacity-60">
            Реєстрацію завершено {endDateFormatted}
          </p>
        </div>
      ) : (
        <a href="/form" class="w-full">
          <div class="relative w-fit max-w-md group">
            <Button
              variant="pixel"
              pixelSize="lg"
              className="font-pixelated font-bold text-lg w-full"
            >
              Registration
            </Button>

            <Image
              src={hand}
              alt="Hand"
              class="w-16 h-16 md:w-24 md:h-24 absolute top-1/2 right-0 translate-x-1/3 z-20 pointer-events-none"
            />
          </div>
        </a>
      )
    }
  </div>
</div>
